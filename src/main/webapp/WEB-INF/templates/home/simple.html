<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Home</title>
    <link rel="stylesheet" href="css/simple.css" th:href="@{/css/simple.css}"/>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
</head>
<body>
<nav>
    <img class="logo" src="/images/logo-removebg-preview.png" th:src="@{/images/logo-removebg-preview.png}" alt="Hanze Logo">
    <ul class="nav__links">
        <li><a class="fileButton panelButtons">New Files</a></li>
        <li><a class="projectButton panelButtons">Personal Files</a></li>
        <li><a class="analysisButton panelButtons">Analysis</a></li>
        <li><a class="logoutButton">Logout</a></li>
    </ul>
</nav>

<div class="container">
    <div id="list-panel" class="newFiles">
        <div class="addFiles">
            <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-big-right" width="40" height="40" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M4 9h8v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-8a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1z"></path>
                </svg>
            </div>
        </div>
        <div class="tooltip selected-files">
            <div class="tooltipBox">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-help" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <circle cx="12" cy="12" r="9" />
                    <line x1="12" y1="17" x2="12" y2="17.01" />
                    <path d="M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" />
                </svg>
                <span>In deze box staan je geselecteerde bestanden</span>
            </div>
        </div>
        <div class="tooltip new-files">
            <div class="tooltipBox">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-help" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <circle cx="12" cy="12" r="9" />
                    <line x1="12" y1="17" x2="12" y2="17.01" />
                    <path d="M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" />
                </svg>
                <span>In deze box staan alle (nieuwe) bestanden</span>
            </div>
        </div>
        <div class="new-file-list">
            <div class="title">
                <h3>New Files</h3>
            </div>
            <div class="filters">
                <select name="file-filters" id="file-filters">
                    <option value="0">All Files</option>
                    <option value="1">Never used</option>
                    <option value="2">Low Useage</option>
                    <option value="3">Medium Usage</option>
                    <option value="4">High Usage</option>
                </select>
                <input type="text" placeholder="Search.." onkeyup="filterFileFunction()" id="filterFileInput">
            </div>
            <div class="file-list">
                <div class="all-files">
                    <ul id="current-files">
                        <th:block th:each="files : ${filesList}">
                            <li>
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-analytics" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path>
                                    <line x1="9" y1="17" x2="9" y2="12"></line>
                                    <line x1="12" y1="17" x2="12" y2="16"></line>
                                    <line x1="15" y1="17" x2="15" y2="14"></line>
                                </svg>
                                <th:block th:if="${files.used.name() == 'NONE'}">
                                    <span  class="fileName none-used" th:text="${files.fileName}">
                                    </span><span th:text="${files.date}"></span>
                                </th:block>
                                <th:block th:if="${files.used.name() == 'LOW'}">
                                    <span  class="fileName low-used" th:text="${files.fileName}">
                                    </span><span th:text="${files.date}"></span>
                                </th:block>
                                <th:block th:if="${files.used.name() == 'MEDIUM'}">
                                    <span  class="fileName medium-used" th:text="${files.fileName}">
                                    </span><span th:text="${files.date}"></span>
                                </th:block>
                                <th:block th:if="${files.used.name() == 'HIGH'}">
                                    <span  class="fileName high-used" th:text="${files.fileName}">
                                    </span><span th:text="${files.date}"></span>
                                </th:block>
                            </li>
                        </th:block>
                    </ul>
                </div>
            </div>
        </div>
        <div class="chosen-content">
                <div class="title">
                    <h3>Add Files</h3>
                </div>
                <div class="project-type">
                    <div class="buttons">
                        <a class="project-button active new">New project</a>
                        <a class="project-button existing">Add to existing project</a>
                    </div>
                    <div class="options">
                        <div class="new-project">
                            <label for="projectname">Project name*</label>
                            <input type="text" name="projectname" id="projectname" required placeholder="projectname" class="form-element">
                        </div>
                        <div class="existing-project">
                            <select name="projects-names" id="projects-name">
                                <option th:each="project : ${projects}" value="${project.id}" th:text="${project.name}"></option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="files"></div>
                <div class="add-button button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circle-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="lightgray" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <circle cx="12" cy="12" r="9"></circle>
                        <line x1="9" y1="12" x2="15" y2="12"></line>
                        <line x1="12" y1="9" x2="12" y2="15"></line>
                    </svg>
<!--                    <h3 type="button" onclick="createProject()">Add project to your account</h3>-->
                    <h3>Add project to your account</h3>
                </div>
                <div class="download-button button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
                        <polyline points="7 11 12 16 17 11"></polyline>
                        <line x1="12" y1="4" x2="12" y2="16"></line>
                    </svg>
                    <h3 type="button" onclick="getFiles()">Download</h3>
                </div>
        </div>
    </div>
    <div id="project-panel" class="personal">
        <div class="titles">
            <h3 class="active all-button">All Personal Files</h3>
            <h3 class="project-button">Personal Projects</h3>
        </div>
        <div class="all-personal-files tile">
            <div class="search">
                <input type="text" placeholder="Search.." onkeyup="filterPersonalFunction()" id="filterPersonalInput">
            </div>
            <div class="personal-file-list">
                <th:block th:each="files : ${testFiles}">
                    <div class="file-container">
                        <div class="file-info">
                            <div class="name" th:text="${files.fileName}"></div>
                            <div class="read">Read</div>
                            <div class="label">Label</div>
                            <div class="del del-button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <line x1="4" y1="7" x2="20" y2="7"></line>
                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                    <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                    <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                                </svg>
                            </div>
                            <div class="edit edit-button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-dots-vertical" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <circle cx="12" cy="12" r="1"></circle>
                                    <circle cx="12" cy="19" r="1"></circle>
                                    <circle cx="12" cy="5" r="1"></circle>
                                </svg>
                            </div>
                        </div>
                        <div class="file-edit">
                            <input type="text" name="filename" id="filename" required placeholder="Filename" class="form-element">
                            <input type="text" name="read" id="read" required placeholder="Read" class="form-element">
                            <input type="text" name="label" id="label" required placeholder="Label" class="form-element">
                            <div class="change-button">Edit</div>
                        </div>
                    </div>
                </th:block>
            </div>
        </div>
        <div class="all-projects tile">
            <div class="search">
                <input type="text" placeholder="Search.." onkeyup="filterProjectFunction()" id="filterProjectsInput">
            </div>
            <div class="personal-projects">
                <div class="project">
                    <div class="title">
                        <div class="projectName">
                            <h4>Project Name 1</h4>
                        </div>
                        <div class="del del-project">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <line x1="4" y1="7" x2="20" y2="7"></line>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                            </svg>
                        </div>
                        <div class="icon">
                            <div class="maximize active">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrows-maximize" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <polyline points="16 4 20 4 20 8"></polyline>
                                    <line x1="14" y1="10" x2="20" y2="4"></line>
                                    <polyline points="8 20 4 20 4 16"></polyline>
                                    <line x1="4" y1="20" x2="10" y2="14"></line>
                                    <polyline points="16 20 20 20 20 16"></polyline>
                                    <line x1="14" y1="14" x2="20" y2="20"></line>
                                    <polyline points="8 4 4 4 4 8"></polyline>
                                    <line x1="4" y1="4" x2="10" y2="10"></line>
                                </svg>
                            </div>
                            <div class="minimize">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrows-minimize" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <polyline points="5 9 9 9 9 5"></polyline>
                                    <line x1="3" y1="3" x2="9" y2="9"></line>
                                    <polyline points="5 15 9 15 9 19"></polyline>
                                    <line x1="3" y1="21" x2="9" y2="15"></line>
                                    <polyline points="19 9 15 9 15 5"></polyline>
                                    <line x1="15" y1="9" x2="21" y2="3"></line>
                                    <polyline points="19 15 15 15 15 19"></polyline>
                                    <line x1="15" y1="15" x2="21" y2="21"></line>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="project-edit">
                        <div>
                            <p>Current filename</p>
                            <input type="text" name="filename" id="filename" required placeholder="Filename" class="form-element">
                        </div>
                        <div>
                            <p>Current Read</p>
                            <input type="text" name="read" id="read" required placeholder="Read" class="form-element">
                        </div>
                        <div>
                            <p>Current label</p>
                            <input type="text" name="label" id="label" required placeholder="Label" class="form-element">
                        </div>
                        <div class="change-button">Edit</div>
                    </div>
                </div>
                <div class="project">
                    <div class="title">
                        <div class="projectName">
                            <h4>Project Name 2</h4>
                        </div>
                        <div class="del del-project">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <line x1="4" y1="7" x2="20" y2="7"></line>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                                <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                            </svg>
                        </div>
                        <div class="icon">
                            <div class="maximize active">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrows-maximize" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <polyline points="16 4 20 4 20 8"></polyline>
                                    <line x1="14" y1="10" x2="20" y2="4"></line>
                                    <polyline points="8 20 4 20 4 16"></polyline>
                                    <line x1="4" y1="20" x2="10" y2="14"></line>
                                    <polyline points="16 20 20 20 20 16"></polyline>
                                    <line x1="14" y1="14" x2="20" y2="20"></line>
                                    <polyline points="8 4 4 4 4 8"></polyline>
                                    <line x1="4" y1="4" x2="10" y2="10"></line>
                                </svg>
                            </div>
                            <div class="minimize">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrows-minimize" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <polyline points="5 9 9 9 9 5"></polyline>
                                    <line x1="3" y1="3" x2="9" y2="9"></line>
                                    <polyline points="5 15 9 15 9 19"></polyline>
                                    <line x1="3" y1="21" x2="9" y2="15"></line>
                                    <polyline points="19 9 15 9 15 5"></polyline>
                                    <line x1="15" y1="9" x2="21" y2="3"></line>
                                    <polyline points="19 15 15 15 15 19"></polyline>
                                    <line x1="15" y1="15" x2="21" y2="21"></line>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="project-edit">
                        <div>
                            <p>Current filename</p>
                            <input type="text" name="filename" id="filename" required placeholder="Filename" class="form-element">
                        </div>
                        <div>
                            <p>Current Read</p>
                            <input type="text" name="read" id="read" required placeholder="Read" class="form-element">
                        </div>
                        <div>
                            <p>Current label</p>
                            <input type="text" name="label" id="label" required placeholder="Label" class="form-element">
                        </div>
                        <div class="change-button">Edit</div>
                    </div>
                    <div class="project-edit">
                        <div>
                            <p>Current filename</p>
                            <input type="text" name="filename" id="filename" required placeholder="Filename" class="form-element">
                        </div>
                        <div>
                            <p>Current Read</p>
                            <input type="text" name="read" id="read" required placeholder="Read" class="form-element">
                        </div>
                        <div>
                            <p>Current label</p>
                            <input type="text" name="label" id="label" required placeholder="Label" class="form-element">
                        </div>
                        <div class="change-button">Edit</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="analysis-panel" class="analysis">Analysis</div>
</div>

<script type="text/javascript">
    var del = "<span id='readDelete'><svg xmlns='http://www.w3.org/2000/svg' class='icon icon-tabler icon-tabler-x' width='20' height='20' viewBox='0 0 24 24' stroke-width='2' stroke='rgb(160,160,160)' fill='none' stroke-linecap='round' stroke-linejoin='round'><path stroke='none' d='M0 0h24v24H0z' fill='none'></path><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></span>";
    $("#project-panel").hide()
    $("#analysis-panel").hide()
    $(".existing-project").hide();
    $('.all-projects').hide();
    $('.newFiles .addFiles').hide();

    function createProject() {
        var name = $('#projectname').val();
        if (name.length < 1) {
            alert("Please give your project a name!");
            return;
        }
        // let name = document.getElementById("projectname").value;
        // if (name.length < 1) {
        //     window.alert("Please give your project a name!")
        //     return;
        // }
        var url = `createproject?files=thiswillbeafile.fastq&files=thiswillbeonetoo.fastq&name=${name}`;
        var link = document.createElement('a');
        link.href = url;
        link.click();
    }

    function getFiles() {
        //URL TO DOWNLOAD MULTI FILES
       url = "download?allFiles=testplaceholder0.fastq.gz&allFiles=testplaceholder0.fastq.gz";
       // URL TO DOWNLOAD ONE FILE
       // url = "download?allFiles=testplaceholder0.fastq.gz";
        // myvar = [];
        // var url = "download?";
        // $.each($(".inputs .reads").find("p"), function(){
        //     url = url + "allFiles=" + $(this).html().substring(0, $(this).html().indexOf('<spa')) + "&";
        // });
        var link = document.createElement('a');
        link.href = url;
        // link.id = 'someLink'
        //link.href = url.slice(0,-1);
        link.click()
    }
    function filterFileFunction() {
        var input = $("#filterFileInput").val().toUpperCase();
        $.each($("#current-files li"), function(){
            if ($(this).find(".fileName").html().toUpperCase().indexOf(input) >= 0) {
                $(this).show()
            } else {
                $(this).hide()
            }
        });
    };
    function filterPersonalFunction() {
        var input = $("#filterPersonalInput").val().toUpperCase();
        $.each($(".personal-file-list .file-container"), function(){
            if ($(this).find(".name").html().toUpperCase().indexOf(input) >= 0) {
                $(this).show()
            } else {
                $(this).hide()
            }
        });
    };
    function filterProjectFunction () {
        var input = $("#filterProjectsInput").val().toUpperCase();
        $.each($(".personal-projects .project .title .projectName").find('h4'), function(){
            if ($(this).html().toUpperCase().indexOf(input) >= 0) {
                $(this).parent().parent().parent().show()
            } else {
                $(this).parent().parent().parent().hide()
            }
        });
    };
    $(document).ready(function(){
        $('#file-filters').on('change', function() {
            var value = $(this).val();
            if (value == 0){
                $.each($("#current-files li"), function(){
                    $(this).show();
                });
            }
            if (value == 1) {
                $.each($("#current-files li"), function(){
                    if ($(this).find('.fileName').hasClass('none-used')) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }
            if (value == 2) {
                $.each($("#current-files li"), function(){
                    if ($(this).find('.fileName').hasClass('low-used')) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }
            if (value == 3) {
                $.each($("#current-files li"), function(){
                    if ($(this).find('.fileName').hasClass('medium-used')) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }
            if (value == 4) {
                $.each($("#current-files li"), function(){
                    if ($(this).find('.fileName').hasClass('high-used')) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }
        });
        $(document).on('click', ".maximize", function () {
            $.each($(this).parent().parent().parent().find('.project-edit'), function(){
                $(this).addClass('show');
                $(this).parent().find('.maximize').removeClass('active');
                $(this).parent().find('.minimize').addClass('active');
            });
        });
        $(document).on('click', ".minimize", function () {
            $.each($(this).parent().parent().parent().find('.project-edit'), function(){
                $(this).removeClass('show');
                $(this).parent().find('.maximize').addClass('active');
                $(this).parent().find('.minimize').removeClass('active');
            });
        });$(document).on('click', ".analysisButton", function () {
            $("#list-panel").hide()
            $("#project-panel").hide()
            $("#analysis-panel").show()
        });
        $(document).on('click', ".fileButton", function () {
            $("#list-panel").show()
            $("#project-panel").hide()
            $("#analysis-panel").hide()
        });
        $(document).on('click', ".projectButton", function () {
            $("#list-panel").hide()
            $("#project-panel").show()
            $("#analysis-panel").hide()
        });
        $(document).on('click', ".addFiles", function () {
            $.each($("#current-files li").filter('.selected'), function(){
                $(".chosen-content .files").append("<p class='file-name'>" + $(this).find('.fileName').html() + del + "</p>");
                $(this).removeClass("selected");
            });
            $('.newFiles .addFiles').hide();
        });
        $(document).on('click', '.project-button.existing', function () {
            $(this).parent().find(".project-button").removeClass("active");
            $(this).addClass('active');
            $(".new-project").hide();
            $(".existing-project").show();
        });
        $(document).on('click', '.project-button.new', function () {
            $(this).parent().find(".project-button").removeClass("active");
            $(this).addClass('active');
            $(".existing-project").hide();
            $(".new-project").show();
        });
        $(document).on('click', '#readDelete', function () {
            $(this).parent().remove();
        });
        $(document).on('click', '.add-button', function () {
            // var l = $(".chosen-content .files").find(".file-name").length;
            // if (l < 1) {
            //     alert('Please select a file');
            //     return;
            // }
            var name = $('#projectname').val();
            if (name < 1){
                alert('Please type in a project name');
                return;
            }
            $.ajax({
                type: 'GET',
                url: 'createproject',
                data: {projectname: [name]},
                success : function (){
                    alert("Suucces");
                },
                error : function (){
                    alert("Something went wrong");
                }
            });
        });
        $(document).on('click', '.titles .all-button', function () {
            $(this).addClass('active');
            $('.titles .project-button').removeClass('active');
            $('.all-projects').hide();
            $('.all-personal-files').show();
        });
        $(document).on('click', '.titles .project-button', function () {
            $(this).addClass('active');
            $('.titles .all-button').removeClass('active');
            $('.all-projects').show();
            $('.all-personal-files').hide();
        });
        $(document).on('click', '.del-button', function () {
            var name = $(this).parent().find('.name').html();
            $(this).parent().fadeOut(200, function() {
                $(this).parent().remove();
            });
            $.ajax({
                type: 'GET',
                url: 'deletefile',
                data: {fileName: name},
                success : function (){
                    alert("Succes")
                },
                error : function (){
                    alert("Something went wrong");
                }
            });
        });
        $(document).on('click', '.del-project', function () {
            var projectName = $(this).parent().find('.projectName').find('h4').html();
            $(this).parent().parent().remove();
            $.ajax({
                type: 'GET',
                url: 'projectdelete',
                data: {projectName: projectName},
                success : function (){
                    alert("Succes");
                },
                error : function (){
                    alert("Something went wrong");
                }
            });
        });
        $(document).on('click', '.change-button', function () {
            var fileName = $(this).parent().find('#filename').val();
            var read = $(this).parent().find('#read').val();
            var label = $(this).parent().find('#label').val();
            if (fileName.length === 0 ){
                fileName = $(this).parent().parent().find('.file-info').find('.name').html();
            }
            if (label.length === 0 ){
                label = $(this).parent().parent().find('.file-info').find('.label').html();
            }
            if (read.length === 0 ){
                read = $(this).parent().parent().find('.file-info').find('.read').html();
            }
            $.ajax({
                type: 'GET',
                url: 'editfile',
                data: {fileInfo: [fileName, read, label]},
                success : function (){
                    alert("Succes");
                },
                error : function (){
                    alert("Something went wrong");
                }
            });

            console.log(fileName);
            console.log(read);
            console.log(label);
        });
        $(document).on('click', '.edit-button', function () {
            $(this).parent().parent().find('.file-edit').toggleClass('show');
        });
        $(function(){
            $("#current-files li").draggable({
                cursor: 'move',
                helper: function(){
                    var selected = $("#current-files li.selected");
                    if (selected.length == 0){
                        selected = $(this).addClass('selected');
                    }
                    var container = $('<div/>').attr('id', 'draggingContainer');
                    container.append(selected.clone().removeClass("selected"));
                    return container;
                }
            });
            $(".files").droppable({
                drop: function(event, ui) {
                    $.each($("#current-files li").filter('.selected'), function(){
                        $(".chosen-content .files").append("<p class='file-name'>" + $(this).find('.fileName').html() + del + "</p>");
                        $(this).removeClass("selected");
                    });
                    if ($('.selected').length >= 1) {
                        $('.newFiles .addFiles').show();
                    } else {
                        $('.newFiles .addFiles').hide();
                    }
                }
            });
        });

        lastChecked = null;
        $(document).on('click', "#current-files li", function (e) {
            if (e.ctrlKey){
                $(this).toggleClass("selected");
            }
            if ($('.selected').length >= 1) {
                $('.newFiles .addFiles').show();
            } else {
                $('.newFiles .addFiles').hide();
            }
            if(!lastChecked){
                lastChecked = this;
                return;
            }
            if (e.shiftKey){
                var from = $("#current-files li").index(this);
                var to = $("#current-files li").index(lastChecked);
                var start = Math.min(from, to);
                var end = Math.max(from, to) + 1;
                $.each($("#current-files li").slice(start, end).filter(':not(.selected)'), function(){
                    $(this).addClass("selected");
                });
                if ($('.selected').length >= 1) {
                    $(".addFiles").show();
                } else {
                    $(".addFiles").hide();
                }
            }
            lastChecked = null;
        });
    });
</script>
</body>
</html>